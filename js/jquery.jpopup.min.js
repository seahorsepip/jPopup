function jPopup(t){function o(){_=$("html").scrollTop(),"fixed"!=$("html").css("position")&&t.overlay&&$("html").css({position:"fixed",top:-_})}function s(){"fixed"!=$("html").css("position")||$("[data-popup][data-overlay]").length||($("html").css("position","static"),$("html").scrollTop(-parseInt($("html").css("top"))),$("html").css("top",0))}function e(){$("body").append(x).append(w),d(),l(),a(),n(),r(),v(),u(),f(),w.fadeTo(t.speed,1),X=!0}function i(){B.off("mousedown touchstart"),k.off("scroll"),w.off("click mousedown touchstart mmouseup touchend"),w.fadeOut(t.speed,function(){w.remove(),s()}),x.fadeOut(t.speed,function(){x.remove()}),X=!1}function l(){t.overlay?(w.attr("data-overlay",""),x.css("z-index",w.css("z-index")).show(),o()):(w.removeAttr("data-overlay"),x.hide(),s())}function n(){t.draggable?(B.css("cursor","move"),"bottom"==t.position&&t.stickToBottom&&(stickToBottom=!1,r())):B.css("cursor","inherit")}function a(){t.closeButton?Y.show():Y.hide()}function r(){switch(t.position){case"center":w.css({position:"fixed",top:"50%",left:"50%",bottom:"auto",right:"auto"}),y.css({position:"relative",top:-y.outerHeight()/2,left:-y.outerWidth()/2,bottom:"auto"})
break
case"top":w.css({position:"fixed",top:0,left:"50%",bottom:"auto",right:"auto"}),y.css({position:"relative",top:0,left:-y.outerWidth()/2,bottom:"auto"})
break
case"left":w.css({position:"fixed",top:"50%",left:"0",bottom:"auto",right:"auto"}),y.css({position:"relative",top:-y.outerHeight()/2,left:0,bottom:"auto"})
break
case"bottom":w.css({position:"fixed",top:"auto",left:"50%",bottom:0,right:"auto"}),t.stickToBottom&&!t.draggable?y.css({position:"absolute",top:"auto",left:-y.outerWidth()/2,bottom:0}):y.css({position:"relative",top:-y.outerHeight(),left:-y.outerWidth()/2,bottom:"auto"})
break
case"right":w.css({position:"fixed",top:"50%",left:"auto",bottom:0,right:0}),y.css({position:"relative",top:-y.outerHeight()/2,left:-y.outerWidth(),bottom:"auto"})}}function c(){$(window).height()-y.offset().top-y.outerHeight()+$("html").scrollTop()<0&&y.offset({top:$(window).height()-y.outerHeight()+$("html").scrollTop()}),$(window).width()-y.offset().left-y.outerWidth()<0&&y.offset({left:$(window).width()-y.outerWidth()}),y.offset().top-$("html").scrollTop()<0&&(t.draggable||"bottom"!=t.position)&&y.offset({top:$("html").scrollTop()}),y.offset().left<0&&y.offset({left:0})}function u(){var o,s
w.removeClass(t.overflowXClass+" "+t.overflowYClass),o=y.outerWidth()>$(window).width()?!0:!1,s=y.outerHeight()>$(window).height()?!0:!1,o&&w.addClass(t.overflowXClass),s&&w.addClass(t.overflowYClass)}function f(){k.scrollTop()?w.removeClass(t.scrollTopClass):w.addClass(t.scrollTopClass),k.prop("scrollHeight")-k.height()-k.scrollTop()?w.removeClass(t.scrollBottomClass):w.addClass(t.scrollBottomClass)}function d(){w.css("z-index",p()+1)}function h(){var t=w.css("z-index"),o=p()
$("[data-popup]").each(function(){var o=parseInt($(this).css("z-index"))
o>t&&$(this).css("z-index",o-1)}),w.css("z-index",o)}function p(){var t=[9999]
return $("[data-popup]").each(function(){var o=parseInt($(this).css("z-index"))
o&&t.push(o)}),Math.max.apply(Math,t)}function v(o,s){s=void 0==s?t.offset.y:s,o=void 0==o?t.offset.x:o,fY=y.offset().top,H=y.offset().left,y.offset({top:fY-s,left:H+o}),c()}function C(){var o={}
switch(t.position){case"center":case"left":case"right":o.y=w.offset().top-y.offset().top-y.outerHeight()/2
break
case"top":o.y=w.offset().top-y.offset().top
break
case"bottom":o.y=w.offset().top-y.offset().top-y.outerHeight()}switch(t.position){case"center":case"top":case"bottom":o.x=y.offset().left-w.offset().left+y.outerWidth()/2
break
case"left":o.x=y.offset().left-w.offset().left
break
case"right":o.x=y.offset().left-w.offset().left+y.outerWidth()}return o.y=Math.round(o.y),o.x=Math.floor(o.x),o}function m(){var o,s,e,i,l,n,a=""
for(o=0;o<t.buttons.length;o++)s=t.buttons[o]["class"]?" class="+t.buttons[o]["class"]:"",e=t.buttons[o].checkForm?" data-checkform=true":"",i=t.buttons[o].close===!1?" data-close="+t.buttons[o].close:"",l=void 0!==t.buttons[o].value?" data-value="+t.buttons[o].value:"",n=t.buttons[o].text||"",a+="<button"+s+i+e+l+">"+n+"</button>"
return a}function g(){return"function"==typeof document.createElement("input").checkValidity}var b,w,y,x,B,k,T,Y,X,_,H,z,W,M,E="popup",D={title:"",content:"",buttons:[],popupClass:E,wrapperClass:E+"_wrapper",overlayClass:E+"_overlay",titleClass:E+"_title",contentClass:E+"_content",buttonsClass:E+"_buttons",overflowXClass:E+"_overflow_x",overflowYClass:E+"_overflow_y",scrollTopClass:E+"_scroll_top",scrollBottomClass:E+"_scroll_bottom",closeButtonClass:E+"_close",closeButtonContent:'&times;<svg fill="#000000" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>',closeButton:!1,overlay:!0,overlayClose:!1,draggable:!1,position:"center",offset:{x:0,y:0},speed:200,stickToBottom:!0,keyClose:!1}
t=$.extend(D,t),b=$('<div><div class="'+t.overlayClass+'" style="position: fixed; top: 0; left: 0; bottom: 0; right: 0;"></div><div class="'+t.wrapperClass+'" style="opacity: 0; width: 0; height: 0;" data-popup><form class="'+t.popupClass+'" style="position: relative;"><div class="'+t.titleClass+'">'+t.title+'</div><div class="'+t.contentClass+'">'+t.content+'</div><div class="'+t.buttonsClass+'">'+m()+'</div><div class="'+t.closeButtonClass+'">'+t.closeButtonContent+"</div></form></div></div>"),w=b.children("div:last-child"),y=w.children("form"),x=b.children("div:first-child"),B=y.children("."+t.titleClass),k=y.children("."+t.contentClass),T=y.children("."+t.buttonsClass),Y=y.children("."+t.closeButtonClass),M=!1,this.open=function(o){var s,l=$.Deferred()
return e(),s=!1,T.on("click","button",function(t){var o,e,n
t.preventDefault(),o=$(this).data("value"),e=$(this).data("checkform"),n=$(this).data("close"),g()&&e?(console.log("checking"),y[0].checkValidity()||$('<input type="submit">').hide().appendTo(y).click().remove()):(s||l.notify(o,y),n!==!1&&(i(),s=!0))}),Y.on("click",function(t){t.preventDefault(),i()}),k.on("scroll",function(){f()}),$(window).on("resize",function(){X&&(c(),u(),f())}),B.on("mousedown touchstart",function(o){t.draggable&&(M=!0,fY=y.offset().top,H=y.offset().left,z=o.pageY||o.originalEvent.touches[0].pageY,W=o.pageX||o.originalEvent.touches[0].pageX,y.css("user-select","none"))}),$(document).on("mousemove touchmove",function(o){M&&t.draggable&&X&&(mY=void 0==o.pageY?o.originalEvent.touches[0].pageY:o.pageY,mX=void 0==o.pageX?o.originalEvent.touches[0].pageX:o.pageX,y.offset({top:fY+mY-z,left:H+mX-W}),c())}),w.on("mouseup touchend",function(o){t.draggable&&(M=!1,y.css("user-select","inherit"))}),w.on("mousedown touchstart",function(){t.draggable&&h()}),x.on("click",function(){t.overlayClose&&i()}),$(document).on("keydown",function(o){o.which==t.keyClose&&w.css("z-index")==p()&&X&&i()}),l.progress(o)},this.close=function(){return i(),this},this.addClass=function(t){return w.addClass(t),this},this.removeClass=function(t){return w.removeClass(t),this},this.title=function(o){return void 0==o?t.title:(B.html(t.fTitle),t.title=o,this)},this.content=function(o){return void 0==o?t.content:(k.html(t.fContent),t.content=o,this)},this.buttons=function(o){return void 0==o?t.buttons:(t.buttons=o,T.html(m()),this)},this.overlay=function(o){return void 0==o?t.overlay:(t.overlay=o?!0:!1,l(),this)},this.draggable=function(o){return void 0==o?t.draggable:(t.draggable=o?!0:!1,n(),this)},this.closeButton=function(o){return void 0==o?t.closeButton:(t.closebutton=o?!0:!1,a(),this)},this.popupClass=function(o){return void 0==o?t.popupClass:(y.removeClass(t.popupClass).addClass(o),t.popupClass=o,this)},this.wrapperClass=function(o){return void 0==o?t.wrapperClass:(w.removeClass(t.wrapperClass).addClass(o),t.wrapperClass=o,this)},this.overlayClass=function(o){return void 0==o?t.overlayClass:(x.removeClass(t.overlayClass).addClass(o),t.overlayClass=o,this)},this.titleClass=function(o){return void 0==o?t.titleClass:(B.removeClass(t.titleClass).addClass(o),t.titleClass=o,this)},this.contentClass=function(o){return void 0==o?t.contentClass:(k.removeClass(t.contentClass).addClass(o),t.contentClass=o,this)},this.buttonsClass=function(o){return void 0==o?t.buttonsClass:(T.removeClass(t.buttonsClass).addClass(o),t.buttonsClass=o,this)},this.overflowXClass=function(o){return void 0==o?t.overflowXClass:(w.removeClass(t.overflowXClass).addClass(o),t.overflowXClass=o,this)},this.overflowYClass=function(o){return void 0==o?t.overflowYClass:(w.removeClass(t.overflowYClass).addClass(o),t.overflowYClass=o,this)},this.scrollTopClass=function(o){return void 0==o?t.scrollTopClass:(w.removeClass(t.scrollTopClass).addClass(o),t.scrollTopClass=o,this)},this.scrollBottomClass=function(o){return void 0==o?t.scrollBottomClass:(w.removeClass(t.scrollBottomClass).addClass(o),t.scrollBottomClass=o,this)},this.closeButtonClass=function(o){return void 0==o?t.closeButtonClass:(Y.removeClass(t.closeButtonClass).addClass(o),t.closeButtonClass=o,this)},this.closeButtonContent=function(o){return void 0==fCloseButtonHTML?t.closeButtonContent:(Y.html(fCloseButtonHTML),t.closeButtonContent=o,this)},this.speed=function(o){return void 0==fSpeed?t.speed:(t.speed=fSpeed,this)},this.position=function(o){return void 0==o?t.position:(t.position=o,r(),t.offset.y=0,t.offset.x=0,this)},this.offset=function(t){var o,s
return void 0==t?C():(o=void 0==t.y?0:t.y,s=void 0==t.x?0:t.x,v(s,o),this)},this.overlayClose=function(o){return void 0==o?t.overlayClose:(t.overlayClose=o?!0:!1,r(),this)},this.stickToBottom=function(o){return void 0==o?t.stickToBottom:(t.stickToBottom=o?!0:!1,t.offset.y=0,t.offset.x=0,r(),r(),void 0)},this.keyClose=function(o){return void 0==o?t.keyClose:void(t.keyClose=o?o:!1)}}
