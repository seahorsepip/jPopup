function jPopup(t){function e(t,i,o,s,n,p,h){if("function"==typeof t)$.each(n,function(t,e){n!=jPopup.prototype&&t!=h&&!s&!p.hasOwnProperty(t)&&(p[t]=function(){return e.apply(this,arguments)})}),p[h]=function(){var e=arguments;return this._super=function(){return i.apply(this,e)},s&&"vars"in jPopup.plugins[s]&&(this._vars=jPopup.plugins[s].vars),t.apply(this,e)};else for(h in t)o.hasOwnProperty(h)||(o[h]={}),e(t[h],i[h],o[h],s,i,o,h)}var i={title:"",content:"",buttons:[],closeButtonContent:"&#215;",closeButton:!1,overlay:!0,overlayClose:!1,position:"center",offset:{x:0,y:0},speed:300,animations:{open:{center:function(){this._animations.zoomIn.call(this)},top:function(){this._animations.zoomIn.call(this)},left:function(){this._animations.zoomIn.call(this)},bottom:function(){this._animations.zoomIn.call(this)},right:function(){this._animations.zoomIn.call(this)}},close:{center:function(){this._animations.zoomOut.call(this)},top:function(){this._animations.zoomOut.call(this)},left:function(){this._animations.zoomOut.call(this)},bottom:function(){this._animations.zoomOut.call(this)},right:function(){this._animations.zoomOut.call(this)}}},stickToBottom:!0,closeKeys:[],freeze:!0,mediaquery:!0,responsive:{},plugins:{},overrides:{}};do this.id=Math.random().toString(36).substr(2,8)+(new Date).getTime().toString(36);while(!this.id||16!=this.id.length);if(!jPopup.loaded){jPopup.loaded=!0;for(name in jPopup.plugins)e(jPopup.plugins[name].overrides,jPopup.prototype,jPopup.prototype,name)}for(name in jPopup.plugins)i.plugins[name]=jPopup.plugins[name].defaults;this._config=$.extend(!0,i,t),e(this._config.overrides,jPopup.prototype,this);var o=$('<div><div class="jp_overlay" style="position:fixed;top:0;left:0;bottom:0;right:0;display:none;"></div><div class="jp_wrapper" style="position:fixed;top:-9999px;left:-9999px;"><form class="jp_popup" style="position:absolute;float:left;"><header class="jp_title"></header><section class="jp_content"></section><footer class="jp_buttons"></footer><button class="jp_close" style="position:absolute;top:0;right:0;width:20px;height:20px;"></button><div class="jp_resize" style="display:none;"><div style="position:absolute;top:0;left:0;right:0;height:6px;cursor:n-resize;"></div><div style="position:absolute;top:0;left:0;bottom:0;width:6px;cursor:w-resize;"></div><div style="position:absolute;left:0;bottom:0;right:0;height:6px;cursor:s-resize;"></div><div style="position:absolute;top:0;bottom:0;right:0;width:6px;cursor:e-resize;"></div><div style="position:absolute;top:0;left:0;width:6px;height:6px;cursor:nw-resize;"></div><div style="position:absolute;top:0;right:0;width:6px;height:6px;cursor:ne-resize;"></div><div style="position:absolute;left:0;bottom:0;width:6px;height:6px;cursor:sw-resize;"></div><div style="position:absolute;bottom:0;right:0;width:6px;height:6px;cursor:se-resize;"></div></div></form></div></div>');this.elements={},this.elements.overlay=o.children(".jp_overlay"),this.elements.wrapper=o.children(".jp_wrapper"),this.elements.popup=this.elements.wrapper.children(".jp_popup"),this.elements.title=this.elements.popup.children(".jp_title"),this.elements.content=this.elements.popup.children(".jp_content"),this.elements.buttons=this.elements.popup.children(".jp_buttons"),this.elements.close=this.elements.popup.children(".jp_close"),this.elements.resize=this.elements.popup.children(".jp_resize"),this._create()}jPopup.loaded=!1,jPopup.zIndex=1e4,jPopup.instances={},jPopup.plugins={},jPopup._super=function(t){return t._super.apply(t)},jPopup.button=function(t){var e={name:"",text:"",value:null,classes:"",disabled:!1,close:!0};this._config=$.extend(!0,e,t),this._parents=[]},jPopup.button.prototype={name:function(t){return arguments.length?void(this._config.name=t):this._config.name},text:function(t){return t?(this._config.text=t,void this._elements(function(){this.html(t)})):this._config.text},value:function(t){return arguments.length?void(this._config.value=t):this._config.value},classes:function(t){return t?(t=jPopup.prototype._unique(t.split(" ")).join(" "),this._config.classes=t,this._elements(function(){this.attr("class",t)}),void 0):this._config.classes},addClass:function(t){this._config.classes=jPopup.prototype._unique(t.split(" ")).join(" "),this._elements(function(){this.addClass(t)})},removeClass:function(t){this._config.classes=jPopup.prototype._unique(t.split(" ")).join(" "),this._elements(function(){this.removeClass(t)})},remove:function(){var t=this;this._elements(function(e,i){this.remove(),t._parents[e]._config.buttons.splice(i,1)})},disable:function(){this._elements(function(){this.attr("disabled","")})},enable:function(){this._elements(function(){this.removeAttr("disabled")})},close:function(t){return arguments.length?void(this._config.close=t):this._config.close},hide:function(){this._elements(function(){this.hide()})},show:function(){this._elements(function(){this.show()})},move:function(t,e){var i=arguments.length,o=this,s=[];return this._elements(function(n,p){if(i){var h=o._parents[n].elements.buttons.children().eq(p),l=o._parents[n]._config.buttons,r=e?t:p+t;r=r>0?r:0,r=r<l.length?r:l.length-1;var c=o._parents[n].elements.buttons.children().eq(r);0>p-r?c.after(h):c.before(h),l.splice(r,0,l.splice(p,1)[0])}else s.push({parent:n,position:p})}),s},clone:function(){new jPopup.button(this._config)},_elements:function(t){for(var e=[],i=0;i<this._parents.length;i++)for(var o=jPopup.prototype._inArray(this,this._parents[i].buttons()),s=0;s<o.length;s++){var n=this._parents[i].elements.buttons.children().eq(o[s]);e.push(n),t&&t.call(n,i,o[s])}return e}},jPopup.prototype={_create:function(){this.title(this._config.title),this.content(this._config.content),this.buttons(this._config.buttons),this.closeButton(this._config.closeButton),this.closeButtonContent(this._config.closeButtonContent);var t=this.elements.wrapper;$("body").append(t),setTimeout(function(){t.remove()},0)},open:function(t){console.log(t);var e=this;jPopup.instances[this.id]=this,$("body").append(this.elements.overlay),$("body").append(this.elements.wrapper);var i=this._config.offset;this.position(this._config.position),this.offset(i),this._zIndex(),this.overlay(this._config.overlay),this.freeze(this._config.freeze),this._config.animations.open[this._config.position].call(this);$.Deferred();return this.elements.popup.on("click","button",function(i){if($.contains(e.elements.buttons[0],this)){i.preventDefault();var o=e._config.buttons[$(this).index()];o.close()&&e.close(),t&&t.call(e,o.value())}}),this.elements.close.on("click",function(t){t.preventDefault(),e.close()}),this},close:function(){this._overlay.hide.call(this),this.freeze(!1,!0),this._config.animations.close[this._config.position].call(this);var t=this;return setTimeout(function(){t.elements.overlay.remove(),t.elements.wrapper.remove()},this._config.speed),this.elements.popup.off("click"),this.elements.close.off("click"),delete jPopup.instances[this.id],this},title:function(t){return arguments.length?(this._config.title=t,this.elements.title.html(t),t?this.elements.popup.prepend(this.elements.title):this.elements.title.remove(),this):this._config.title},content:function(t){return arguments.length?(this._config.content=t,this.elements.content.html(t),t?$.contains(this.elements.popup[0],this.elements.title[0])?this.elements.title.after(this.elements.content):this.elements.popup.prepend(this.elements.content):this.elements.content.remove(),this):this._config.content},buttons:function(t){if($.isArray(t)){this._config.buttons=t,this.elements.buttons.html("");for(var e=0;e<this._config.buttons.length;e++){var i=this._config.buttons[e];i instanceof jPopup.button||(i=new jPopup.button(i),this._config.buttons[e]=i),this.elements.buttons.append($("<button>")),i._parents.push(this),i.text(i._config.text),i.classes(i._config.classes),i._config.disabled&&i.disable()}return this.elements.buttons.html()?$.contains(this.elements.popup[0],this.elements.close[0])?this.elements.close.before(this.elements.buttons):this.elements.popup.append(this.elements.buttons):this.elements.buttons.remove(),this}if("string"!=typeof t)return t%1==0?this._config.buttons[t]:this._config.buttons;for(var e=0;e<this._config.buttons.length;e++){var i=this._config.buttons[e];if(i.name==t)return i}},closeButton:function(t){return arguments.length?(this._config.closeButton=t?!0:!1,t?this.elements.popup.append(this.elements.close):this.elements.close.remove(),this):this._config.closeButton},closeButtonContent:function(t){return arguments.length?(this._config.closeButtonContent=t,this.elements.close.html(t),this):this._config.closeButtonContent},overlay:function(t){return arguments.length?(this._config.overlay=t?!0:!1,t?this._overlay.show.call(this):this._overlay.hide.call(this),this):this._config.overlay},_overlay:{show:function(){var t=this,e=this._config.speed;this.elements.overlay.css({display:"block",opacity:0}),setTimeout(function(){t.elements.overlay.css({opacity:"1",transition:"opacity "+e+"ms"})},10)},hide:function(){var t=this,e=this._config.speed;this.elements.overlay.css({opacity:0,transition:"opacity "+e+"ms"}),setTimeout(function(){t.elements.overlay.hide()},e)}},freeze:function(t,e){if(!arguments.length)return this._config.freeze;var i,o=0;for(id in jPopup.instances){var s=jPopup.instances[id];s.overlay()&&s.freeze()&&(i=!0,o++)}!t||i&&1!=o?!t&&i&&1==o&&this._unfreeze():this._freeze(),e||(this._config.freeze=t?!0:!1)},_freeze:function(){var t=$("html").scrollTop()?$("html").scrollTop():$("body").scrollTop(),e=$("html").scrollLeft()?$("html").scrollLeft():$("body").scrollLeft();window.innerWidth>document.documentElement.clientWidth&&$("html").css("overflow-y","scroll"),window.innerHeight>document.documentElement.clientHeight&&$("html").css("overflow-x","scroll"),$("html").css({width:"100%",height:"100%",position:"fixed",top:-t,left:-e})},_unfreeze:function(){$("html").css("position","static"),$("html, body").scrollTop(-parseInt($("html").css("top"))),$("html, body").scrollLeft(-parseInt($("html").css("left"))),$("html").css({position:"",width:"",height:"",top:"",left:"","overflow-y":"","overflow-x":""})},form:function(){return this.elements.popup},position:function(t){if(!arguments.length)return this._config.position;switch(this._config.position=t,this._config.offset={x:0,y:0},this._config.position){case"center":this.elements.wrapper.css({width:0,height:0,position:"fixed",top:"50%",left:"50%",bottom:"",right:""}),this.elements.popup.css({width:"",height:"",position:"relative",top:-this.elements.popup.outerHeight()/2,left:-this.elements.popup.outerWidth()/2,bottom:""});break;case"top":this.elements.wrapper.css({width:0,height:0,position:"fixed",top:0,left:"50%",bottom:"",right:""}),this.elements.popup.css({width:"",height:"",position:"relative",top:0,left:-this.elements.popup.outerWidth()/2,bottom:""});break;case"left":this.elements.wrapper.css({width:0,height:0,position:"fixed",top:"50%",left:0,bottom:"",right:""}),this.elements.popup.css({width:"",height:"",position:"relative",top:-this.elements.popup.outerHeight()/2,left:0,bottom:""});break;case"bottom":this.elements.wrapper.css({width:0,height:0,position:"fixed",top:"",left:"50%",bottom:0,right:""}),this.elements.popup.css("bottom"!=this._config.position&&"bottomLeft"!=this._config.position&&"bottomRight"!=this._config.position&&"stretchBottom"!=this._config.position||this._config.draggable?{width:"",height:"",position:"relative",top:-this.elements.popup.outerHeight(),left:-this.elements.popup.outerWidth()/2,bottom:""}:{position:"absolute",top:"",left:-this.elements.popup.outerWidth()/2,bottom:0});break;case"right":this.elements.wrapper.css({width:0,height:0,position:"fixed",top:"50%",left:"",bottom:0,right:0}),this.elements.popup.css({width:"",height:"",position:"relative",top:-this.elements.popup.outerHeight()/2,left:-this.elements.popup.outerWidth(),bottom:""});break;case"topLeft":this.elements.wrapper.css({width:0,height:0,position:"fixed",top:0,left:0,bottom:"",right:""}),this.elements.popup.css({width:"",height:"",position:"relative",top:0,left:0,bottom:""});break;case"topRight":this.elements.wrapper.css({width:0,height:0,position:"fixed",top:0,left:"",bottom:"",right:0}),this.elements.popup.css({width:"",height:"",position:"relative",top:0,left:-this.elements.popup.outerWidth(),bottom:""});break;case"bottomLeft":this.elements.wrapper.css({width:0,height:0,position:"fixed",top:"",left:0,bottom:0,right:""}),this.elements.popup.css(this._config.stickToBottom&&!this._config.draggable?{position:"absolute",top:"",left:0,bottom:0}:{width:"",height:"",position:"relative",top:-this.elements.popup.outerHeight(),left:0,bottom:""});break;case"bottomRight":this.elements.wrapper.css({width:0,height:0,position:"fixed",top:"",left:"",bottom:0,right:0}),this.elements.popup.css(this._config.stickToBottom&&!this._config.draggable?{position:"absolute",top:"",left:-this.elements.popup.outerWidth(),bottom:0}:{width:"",height:"",position:"relative",top:-this.elements.popup.outerHeight(),left:-this.elements.popup.outerWidth(),bottom:""});break;case"stretchTop":this.elements.wrapper.css({width:"100%",height:0,position:"fixed",top:0,left:0,bottom:"",right:""}),this.elements.popup.css({width:"100%",height:"",position:"relative",top:0,left:0,bottom:""});break;case"stretchLeft":this.elements.wrapper.css({width:0,height:"100%",position:"fixed",top:0,left:0,bottom:"",right:""}),this.elements.popup.css({width:"",height:"100%",position:"relative",top:0,left:0,bottom:""});break;case"stretchBottom":this.elements.wrapper.css({width:"100%",height:0,position:"fixed",top:"",left:0,bottom:0,right:""}),this.elements.popup.css(this._config.stickToBottom&&!this._config.draggable?{width:"100%",height:"",position:"absolute",top:"",left:0,bottom:0}:{width:"100%",height:"",position:"relative",top:"",left:0,bottom:""});break;case"stretchRight":this.elements.wrapper.css({width:0,height:"100%",position:"fixed",top:0,left:"",bottom:"",right:0}),this.elements.popup.css({width:"",height:"100%",position:"relative",top:0,left:-this.elements.popup.outerWidth(),bottom:""});break;case"full":this.elements.wrapper.css({width:"100%",height:"100%",position:"fixed",top:0,left:0,bottom:"",right:""}),this.elements.popup.css({width:"100%",height:"100%",position:"relative",top:0,left:0,bottom:""})}},offset:function(t){if(arguments.length){{this.position()}if("stretchTop"!=this.position()&&"stretchLeft"!=this.position()&&"stretchBottom"!=this.position()&&"stretchRight"!=this.position()){var e=this.elements.popup,i=e.offset().top,o=e.offset().left;t={x:t.x||0,y:t.y||0};var s=i-t.y,n=o+t.x;s-$("html").scrollTop()<0&&(t.y=0,s=0),$(window).height()-s-e.outerHeight()+$("html").scrollTop()<0&&(t.y=0,s=$(window).height()-e.outerHeight()+$("html").scrollTop()),0>n&&(t.x=0,n=0),$(window).width()-n-e.outerWidth()<0&&(t.x=0,n=$(window).width()-e.outerWidth()),this._config.offset={x:this._config.offset.x+t.x,y:this._config.offset.y+t.y},e.offset({top:s,left:n})}}return this._config.offset},clone:function(){return new jPopup(this._config)},_zIndex:function(){var t=jPopup.zIndex-1;for(var e in jPopup.instances)t++;this.elements.overlay.css("z-index",t),this.elements.wrapper.css("z-index",t)},_animations:{zoomIn:function(){var t=this,e=this._config.speed;this.elements.popup.css({opacity:0,transform:"scale(.8)"}),setTimeout(function(){t.elements.popup.css({opacity:"1",transform:"scale(1)",transition:"opacity "+e+"ms, transform "+e+"ms"}),t._animations._clean.apply(t)},10)},zoomOut:function(){var t=this._config.speed;this.elements.popup.css({opacity:0,transform:"scale(.8)",transition:"opacity "+t+"ms, transform "+t+"ms"}),this._animations._clean.call(this)},_clean:function(){var t=this;setTimeout(function(){t.elements.popup.css({opacity:"",transform:"",transition:""})},this._config.speed)}},_inArray:function(t,e){var i=[],o=-1;do o=$.inArray(t,e,o+1),i.push(o);while(o>-1);return i.splice(-1,1),i},_unique:function(t){return $.grep(t,function(e,i){return i===$.inArray(e,t)})}};