jPopup.classBase="jpopup";jPopup.zIndex=1E4;function jPopup(a){function U(){if("fixed"!=$("html").css("position")&&a.overlay){var b=$("html").scrollTop()?$("html").scrollTop():$("body").scrollTop();window.innerWidth>$("html").width()&&$("html").css("overflow-y","scroll");$("html").css({width:"100%",height:"100%",position:"fixed",top:-b})}}function H(){"fixed"==$("html").css("position")&&1==$("[data-popup][data-overlay]").length&&($("html").css("position","static"),$("html, body").scrollTop(-parseInt($("html").css("top"))),$("html").css({position:"",width:"",height:"",top:"","overflow-y":""}))}function I(){a.element.length?a.element.show():$("body").append(e).append(d);d.attr("data-popup","");(e,d).show();J();V();K();L();M();N();f();O();P();z();Q();setTimeout(function(){c.css({transition:"transform "+a.speed/1E3+"s",transform:"scale(1)translate(0,0)"})},1);d.attr("data-position",a.position).css({transition:"opacity "+a.speed/1E3+"s",opacity:1})}function p(){g.off("mousedown touchstart");l.off("scroll");d.off("click mousedown touchstart mmouseup touchend");u.children("div").off("mousedown touchstart");$(window).off("resize",A);$(document).off("mousemove touchmove",B);$(document).off("mouseup touchend",C);R();setTimeout(function(){a.element.length?a.element.hide():(d.remove(),e.remove())},a.speed)}function R(){a.offset=D();d.css("opacity",0);e.css("opacity",0);Q();setTimeout(function(){c.css({transition:"",transform:""});d.hide();e.hide();a.element.length&&d.removeAttr("data-popup").removeAttr("data-overlay");H()},a.speed)}function Q(){switch(a.position){case "stretchTop":c.css({transform:"translateY(-100%)"});break;case "stretchLeft":c.css({transform:"translateX(-100%)"});break;case "stretchBottom":c.css({transform:"translateY(100%)"});break;case "stretchRight":c.css({transform:"translateX(100%)"});break;case "full":break;default:c.css({transform:"scale(.8)"})}}function J(){a.overlay?(d.attr("data-overlay",""),e.show(),setTimeout(function(){e.css({"z-index":w(),transition:"opacity "+a.speed/1E3+"s",opacity:1})},1),U()):(d.removeAttr("data-overlay"),e.css({transition:"opacity "+a.speed/1E3+"s",opacity:0}),setTimeout(function(){e.hide()},a.speed),H())}function L(){a.draggable?(g.css("cursor","move"),"bottom"!=a.position&&"bottomLeft"!=a.position&&"bottomRight"!=a.position&&"stretchBottom"!=a.position||!a.stickToBottom||(stickToBottom=!1,f()),d.attr("data-draggable","")):(g.css("cursor","inherit"),d.removeAttr("data-draggable"))}function M(){a.resizeable?(u.show(),d.attr("data-resizeable","")):(u.hide(),d.removeAttr("data-resizeable"))}function N(){a.buttons.length?d.attr("data-buttons",""):d.removeAttr("data-buttons")}function K(){a.closeButton?q.show():q.hide()}function f(){switch(a.position){case "center":d.css({width:0,height:0,position:"fixed",top:"50%",left:"50%",bottom:"",right:""});c.css({width:"",height:"",position:"relative",top:-c.outerHeight()/2,left:-c.outerWidth()/2,bottom:""});break;case "top":d.css({width:0,height:0,position:"fixed",top:0,left:"50%",bottom:"",right:""});c.css({width:"",height:"",position:"relative",top:0,left:-c.outerWidth()/2,bottom:""});break;case "left":d.css({width:0,height:0,position:"fixed",top:"50%",left:0,bottom:"",right:""});c.css({width:"",height:"",position:"relative",top:-c.outerHeight()/2,left:0,bottom:""});break;case "bottom":d.css({width:0,height:0,position:"fixed",top:"",left:"50%",bottom:0,right:""});"bottom"!=a.position&&"bottomLeft"!=a.position&&"bottomRight"!=a.position&&"stretchBottom"!=a.position||a.draggable?c.css({width:"",height:"",position:"relative",top:-c.outerHeight(),left:-c.outerWidth()/2,bottom:""}):c.css({position:"absolute",top:"",left:-c.outerWidth()/2,bottom:0});break;case "right":d.css({width:0,height:0,position:"fixed",top:"50%",left:"",bottom:0,right:0});c.css({width:"",height:"",position:"relative",top:-c.outerHeight()/2,left:-c.outerWidth(),bottom:""});break;case "topLeft":d.css({width:0,height:0,position:"fixed",top:0,left:0,bottom:"",right:""});c.css({width:"",height:"",position:"relative",top:0,left:0,bottom:""});break;case "topRight":d.css({width:0,height:0,position:"fixed",top:0,left:"",bottom:"",right:0});c.css({width:"",height:"",position:"relative",top:0,left:-c.outerWidth(),bottom:""});break;case "bottomLeft":d.css({width:0,height:0,position:"fixed",top:"",left:"0",bottom:0,right:""});a.stickToBottom&&!a.draggable?c.css({position:"absolute",top:"",left:0,bottom:0}):c.css({width:"",height:"",position:"relative",top:-c.outerHeight(),left:0,bottom:""});break;case "bottomRight":d.css({width:0,height:0,position:"fixed",top:"",left:"",bottom:0,right:0});a.stickToBottom&&!a.draggable?c.css({position:"absolute",top:"",left:-c.outerWidth(),bottom:0}):c.css({width:"",height:"",position:"relative",top:-c.outerHeight(),left:-c.outerWidth(),bottom:""});break;case "stretchTop":d.css({width:"100%",height:0,position:"fixed",top:0,left:0,bottom:"",right:""});c.css({width:"100%",height:"",position:"relative",top:0,left:0,bottom:""});break;case "stretchLeft":d.css({width:0,height:"100%",position:"fixed",top:0,left:0,bottom:"",right:""});c.css({width:"",height:"100%",position:"relative",top:0,left:0,bottom:""});break;case "stretchBottom":d.css({width:"100%",height:0,position:"fixed",top:"",left:0,bottom:0,right:""});a.stickToBottom&&!a.draggable?c.css({width:"100%",height:"",position:"absolute",top:"",left:0,bottom:0}):c.css({width:"100%",height:"",position:"relative",top:"",left:0,bottom:""});break;case "stretchRight":d.css({width:0,height:"100%",position:"fixed",top:0,left:"",bottom:"",right:0});c.css({width:"",height:"100%",position:"relative",top:0,left:-c.outerWidth(),bottom:""});break;case "full":d.css({width:"100%",height:"100%",position:"fixed",top:0,left:0,bottom:"",right:""}),c.css({width:"100%",height:"100%",position:"relative",top:0,left:0,bottom:""})}}function E(){if(a.draggable||!a.stickToBottom||"bottom"!=a.position&&"bottomLeft"!=a.position&&"bottomRight"!=a.position&&"stretchBottom"!=a.position)0>$(window).height()-c.offset().top-c.outerHeight()+$("html").scrollTop()&&c.offset({top:$(window).height()-c.outerHeight()+$("html").scrollTop()}),0>$(window).width()-c.offset().left-c.outerWidth()&&c.offset({left:$(window).width()-c.outerWidth()}),0>c.offset().top-$("html").scrollTop()&&(a.draggable||"bottom"!=a.position)&&c.offset({top:$("html").scrollTop()}),0>c.offset().left&&c.offset({left:0})}function P(){d.removeClass(a.overflowXClass+" "+a.overflowYClass);var b=c.outerWidth()>$(window).width()?!0:!1,W=c.outerHeight()>$(window).height()?!0:!1;b&&d.addClass(a.overflowXClass);W&&d.addClass(a.overflowYClass)}function z(){l.scrollTop()?d.removeClass(a.scrollTopClass):d.addClass(a.scrollTopClass);c.outerHeight();$(window).height();l.prop("scrollHeight")-l.height()-l.scrollTop()?d.removeClass(a.scrollBottomClass):d.addClass(a.scrollBottomClass)}function V(){var a=w()+1;d.css("z-index",a);e.css("z-index",a)}function X(){var a=d.css("z-index"),c=w();$("[data-popup]").each(function(){var c=parseInt($(this).css("z-index"));c>a&&$(this).css("z-index",c-1)});d.css("z-index",c)}function w(){var a=[jPopup.zIndex-1];$("[data-popup]").each(function(){var c=parseInt($(this).css("z-index"));c&&a.push(c)});return Math.max.apply(Math,a)}function O(b,d){"stretchTop"==a.position||"stretchLeft"==a.position||"stretchBottom"==a.position||"stretchRight"==a.position||"bottom"==a.position&&!a.draggable||(d=void 0==d?a.offset.y:d,b=void 0==b?a.offset.x:b,m=c.offset().top,n=c.offset().left,c.offset({top:m-d,left:n+b}),E())}function D(){var b={};switch(a.position){case "center":case "left":case "right":b.y=d.offset().top-c.offset().top-c.outerHeight()/2;break;case "top":case "topLeft":case "topRight":case "stretchTop":case "stretchLeft":case "stretchRight":b.y=d.offset().top-c.offset().top;break;case "bottom":case "bottomLeft":case "bottomRight":case "stretchBottom":b.y=d.offset().top-c.offset().top-c.outerHeight()}switch(a.position){case "center":case "top":case "bottom":b.x=c.offset().left-d.offset().left+c.outerWidth()/2;break;case "left":case "topLeft":case "bottomLeft":case "stretchTop":case "stretchLeft":case "stretchBottom":b.x=c.offset().left-d.offset().left;break;case "right":case "topRight":case "bottomRight":case "stretchRight":b.x=c.offset().left-d.offset().left+c.outerWidth()}b.y=Math.round(b.y);b.x=Math.floor(b.x);return b}function S(){for(var b="",c=0;c<a.buttons.length;c++)b+="<button"+(a.buttons[c].buttonClass?" class="+a.buttons[c].buttonClass:"")+(!1===a.buttons[c].close?" data-close="+a.buttons[c].close:"")+(a.buttons[c].checkForm?" data-checkform=true":"")+(void 0!==a.buttons[c].value?" data-value="+a.buttons[c].value:"")+">"+(a.buttons[c].text||"")+"</button>";return b}a=$.extend({title:"",content:"",buttons:[],popupClass:jPopup.classBase,wrapperClass:jPopup.classBase+"_wrapper",overlayClass:jPopup.classBase+"_overlay",titleClass:jPopup.classBase+"_title",contentClass:jPopup.classBase+"_content",buttonsClass:jPopup.classBase+"_buttons",overflowXClass:jPopup.classBase+"_overflow_x",overflowYClass:jPopup.classBase+"_overflow_y",scrollTopClass:jPopup.classBase+"_scroll_top",scrollBottomClass:jPopup.classBase+"_scroll_bottom",resizeClass:jPopup.classBase+"_resize",closeButtonClass:jPopup.classBase+"_close",closeButtonContent:'&times;<svg fill="#000000" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>',closeButton:!1,overlay:!0,overlayClose:!1,draggable:!1,resizeable:!1,position:"center",offset:{x:0,y:0},speed:300,stickToBottom:!0,keyClose:!1,element:!1},a);var T=$('<div><div class="'+a.overlayClass+'"></div><div class="'+a.wrapperClass+'"><form class="'+a.popupClass+'"><div class="'+a.titleClass+'">'+a.title+'</div><div class="'+a.contentClass+'">'+a.content+'</div><div class="'+a.buttonsClass+'">'+S()+'</div><div class="'+a.closeButtonClass+'">'+a.closeButtonContent+"</div></form></div></div>"),d=(a.element.length?a.element:T).children("."+a.wrapperClass).css({display:"none",opacity:0}),e=(a.element.length?a.element:T).children("."+a.overlayClass).css({position:"fixed",top:0,left:0,bottom:0,right:0,display:"none",opacity:0}),c=d.children("."+a.popupClass).css({position:"absolute","float":"left"}),g=c.children("."+a.titleClass),l=c.children("."+a.contentClass),y=c.children("."+a.buttonsClass),q=c.children("."+a.closeButtonClass),u=$('<div class="'+a.resizeClass+'" style="display: none;"><div style="position:absolute;top:0;left:0;right: 0;height:6px;cursor:n-resize;"></div><div style="position:absolute;top:0;left:0;bottom:0;width:6px;cursor:w-resize;"></div><div style="position:absolute;left:0;bottom:0;right:0;height:6px;cursor:s-resize;"></div><div style="position:absolute;top:0;bottom:0;right:0;width:6px;cursor:e-resize;"></div><div style="position:absolute;top:0;left:0;width:6px;height:6px;cursor:nw-resize;"></div><div style="position:absolute;top:0;right:0;width:6px;height:6px;cursor:ne-resize;"></div><div style="position:absolute;left:0;bottom:0;width:6px;height:6px;cursor:sw-resize;"></div><div style="position:absolute;bottom:0;right:0;width:6px;height:6px;cursor:se-resize;"></div></div>');console.log(d);c.append(u);var m,n,r,t,h,k,F,A,B,C,G,v;this.open=function(b){var f=$.Deferred();I();var x=!1;y.on("click","button",function(a){a.preventDefault();a=$(this).data("value");var b=$(this).data("checkform"),d=$(this).data("close");"function"==typeof document.createElement("input").checkValidity&&b?c[0].checkValidity()?(x||f.notify(a,c),0!=d&&(p(),x=!0)):$('<input type="submit">').hide().appendTo(c).click().remove():(x||f.notify(a,c),0!=d&&(p(),x=!0))});q.on("click",function(a){a.preventDefault();p()});l.on("scroll",function(){z()});A=function(){E();P();z()};$(window).on("resize",A);g.on("mousedown touchstart",function(b){a.draggable&&(F=!0,m=c.offset().top,n=c.offset().left,h=b.pageY||b.originalEvent.touches[0].pageY,k=b.pageX||b.originalEvent.touches[0].pageX,$(document).bind("selectstart.disableSelection",function(a){a.preventDefault()}),$("[data-popup]").css("user-select","none"))});B=function(b){mY=void 0==b.pageY?b.originalEvent.touches[0].pageY:b.pageY;mX=void 0==b.pageX?b.originalEvent.touches[0].pageX:b.pageX;F&&a.draggable&&(c.offset({top:m+mY-h,left:n+mX-k}),E());G&&a.resizeable&&(/0|4|5/.test(v)&&0<m+mY-h&&(c.css("height",""),r-mY+h>c.outerHeight()&&(c.outerHeight(r-mY+h),c.offset({top:m+mY-h}))),/1|4|6/.test(v)&&0<n+mX-k&&(c.css("width",""),t-mX+k>c.outerWidth()&&(c.outerWidth(t-mX+k),c.offset({left:n+mX-k}))),/2|6|7/.test(v)&&m+mY-h+r<$(window).height()&&(c.css("height",""),r+mY-h>c.outerHeight()&&c.outerHeight(r+mY-h)),/3|5|7/.test(v)&&n+mX-k+t<$(window).width()&&(c.css("width",""),t+mX-k>c.outerWidth()&&c.outerWidth(t+mX-k)))};$(document).on("mousemove touchmove",B);C=function(b){a.resizeable&&(G=!1,g.css("cursor",""),$("html").css("cursor",""));a.draggable&&(F=!1,g.css("cursor","move"));$(document).unbind(".disableSelection");$("[data-popup]").css("user-select","")};$(document).on("mouseup touchend",C);d.on("mousedown touchstart",function(){a.draggable&&X()});e.on("click",function(){a.overlayClose&&p()});$(document).on("keydown",function(b){b.which==a.keyClose&&d.css("z-index")==w()&&p()});u.children("div").on("mousedown touchstart",function(b){a.resizeable&&(G=!0,m=c.offset().top,n=c.offset().left,r=c.outerHeight(),t=c.outerWidth(),h=b.pageY||b.originalEvent.touches[0].pageY,k=b.pageX||b.originalEvent.touches[0].pageX,v=$(this).index(),g.css("cursor",$(this).css("cursor")),$("html").css("cursor",$(this).css("cursor")),$("[data-popup]").css("user-select","none"),$(document).bind("selectstart.disableSelection",function(a){a.preventDefault()}))});return f.progress(b)};this.show=function(){I();return this};this.close=function(){p();return this};this.hide=function(){R();return this};this.addClass=function(a){d.addClass(a);return this};this.removeClass=function(a){d.removeClass(a);return this};this.title=function(b){if(void 0==b)return a.title;g.html(a.fTitle);a.title=b;return this};this.content=function(b){if(void 0==b)return a.content;l.html(a.fContent);a.content=b;return this};this.buttons=function(b){if(void 0==b)return a.buttons;a.buttons=b;y.html(S());N();return this};this.overlay=function(b){if(void 0==b)return a.overlay;a.overlay=b?!0:!1;J();return this};this.draggable=function(b){if(void 0==b)return a.draggable;a.draggable=b?!0:!1;L();return this};this.resizeable=function(b){if(void 0==b)return a.resizeable;a.resizeable=b?!0:!1;M();return this};this.closeButton=function(b){if(void 0==b)return a.closeButton;a.closebutton=b?!0:!1;K();return this};this.popupClass=function(b){if(void 0==b)return a.popupClass;c.removeClass(a.popupClass).addClass(b);a.popupClass=b;return this};this.wrapperClass=function(b){if(void 0==b)return a.wrapperClass;d.removeClass(a.wrapperClass).addClass(b);a.wrapperClass=b;return this};this.overlayClass=function(b){if(void 0==b)return a.overlayClass;e.removeClass(a.overlayClass).addClass(b);a.overlayClass=b;return this};this.titleClass=function(b){if(void 0==b)return a.titleClass;g.removeClass(a.titleClass).addClass(b);a.titleClass=b;return this};this.contentClass=function(b){if(void 0==b)return a.contentClass;l.removeClass(a.contentClass).addClass(b);a.contentClass=b;return this};this.buttonsClass=function(b){if(void 0==b)return a.buttonsClass;y.removeClass(a.buttonsClass).addClass(b);a.buttonsClass=b;return this};this.overflowXClass=function(b){if(void 0==b)return a.overflowXClass;d.removeClass(a.overflowXClass).addClass(b);a.overflowXClass=b;return this};this.overflowYClass=function(b){if(void 0==b)return a.overflowYClass;d.removeClass(a.overflowYClass).addClass(b);a.overflowYClass=b;return this};this.scrollTopClass=function(b){if(void 0==b)return a.scrollTopClass;d.removeClass(a.scrollTopClass).addClass(b);a.scrollTopClass=b;return this};this.scrollBottomClass=function(b){if(void 0==b)return a.scrollBottomClass;d.removeClass(a.scrollBottomClass).addClass(b);a.scrollBottomClass=b;return this};this.closeButtonClass=function(b){if(void 0==b)return a.closeButtonClass;q.removeClass(a.closeButtonClass).addClass(b);a.closeButtonClass=b;return this};this.closeButtonContent=function(b){if(void 0==fCloseButtonHTML)return a.closeButtonContent;q.html(closeButtonContent);a.closeButtonContent=b;return this};this.speed=function(b){if(void 0==b)return a.speed;a.speed=b;return this};this.position=function(b){if(void 0==b)return a.position;d.removeAttr("data-position").attr("data-position",b);a.position=b;a.offset.y=0;a.offset.x=0;f();f();return this};this.offset=function(a){if(void 0==a)return D();O(void 0==a.x?0:a.x,void 0==a.y?0:a.y);return this};this.overlayClose=function(b){if(void 0==b)return a.overlayClose;a.overlayClose=b?!0:!1;return this};this.stickToBottom=function(b){if(void 0==b)return a.stickToBottom;a.stickToBottom=b?!0:!1;a.offset.y=0;a.offset.x=0;f();f()};this.keyClose=function(b){if(void 0==b)return a.keyClose;a.keyClose=b?b:!1};this.clone=function(b){a.offset=D();return new jPopup(a)};this.popupWrapper=function(){return d};this.popupOverlay=function(){return e};this.popup=function(){return c};this.popupTitle=function(){return g};this.popupContent=function(){return l};this.popupButtons=function(){return y};this.popupClose=function(){return q}};
